# TODO: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ò–ò-–∞–Ω–∞–ª–∏–∑–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–µ–≥–æ–≤

## üéØ –¶–µ–ª—å
–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª, –ø—Ä–∏ –∫–æ—Ç–æ—Ä–æ–º –±–æ—Ç –ø–æ–ª—É—á–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –ø–µ—Ä–µ–¥–∞–µ—Ç –µ–≥–æ –≤ –≤—ã–±—Ä–∞–Ω–Ω—É—é –ò–ò-–º–æ–¥–µ–ª—å, –∫–æ—Ç–æ—Ä–∞—è –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø–æ–¥—Ö–æ–¥—è—â–∏–π —Ç–µ–≥ –∏–∑ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≤ ZenMoney, –∏ –≤—ã–≤–æ–¥–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ –Ω–æ–≤–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏.

## üìã –ü–æ—à–∞–≥–æ–≤—ã–π –ø–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –ò–ò-—Å–µ—Ä–≤–∏—Å–∞–º–∏
- [ ] **1.1** –î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è –ò–ò-—Å–µ—Ä–≤–∏—Å–æ–≤ –≤ `env.example`:
  ```env
  # AI Services Configuration
  OPENAI_API_KEY=your_openai_api_key_here
  PERPLEXITY_API_KEY=your_perplexity_api_key_here
  AI_SERVICE_PROVIDER=openai  # –∏–ª–∏ perplexity
  AI_MODEL=gpt-3.5-turbo     # –∏–ª–∏ claude-3-sonnet-20240229
  ```
- [ ] **1.2** –û–±–Ω–æ–≤–∏—Ç—å `package.json` —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏ –¥–ª—è –ò–ò:
  ```json
  "openai": "^4.20.0",
  "@anthropic-ai/sdk": "^0.9.0"
  ```
- [ ] **1.3** –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ Render.com –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

### 2. –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ò–ò –≤ Supabase
- [ ] **2.1** –°–æ–∑–¥–∞—Ç—å SQL-—Å–∫—Ä–∏–ø—Ç `supabase_ai_settings_schema.sql`:
  ```sql
  -- –¢–∞–±–ª–∏—Ü–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ò–ò –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
  CREATE TABLE IF NOT EXISTS ai_settings (
      id SERIAL PRIMARY KEY,
      user_id BIGINT NOT NULL,                    -- Telegram user ID
      ai_provider VARCHAR(50) DEFAULT 'openai',   -- openai, perplexity, anthropic
      ai_model VARCHAR(100) DEFAULT 'gpt-3.5-turbo',
      max_tokens INTEGER DEFAULT 150,
      temperature DECIMAL(3,2) DEFAULT 0.7,
      enabled BOOLEAN DEFAULT true,
      created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
      updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
      UNIQUE(user_id)
  );
  ```
- [ ] **2.2** –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥—ã –≤ `SupabaseClient` –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –ò–ò:
  - `getAISettings(userId)`
  - `updateAISettings(userId, settings)`
  - `createDefaultAISettings(userId)`

### 3. –°–æ–∑–¥–∞–Ω–∏–µ –º–æ–¥—É–ª—è –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ò–ò API
- [ ] **3.1** –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª `src/ai/client.js` —Å –∫–ª–∞—Å—Å–æ–º `AIClient`:
  ```javascript
  class AIClient {
    constructor(provider, apiKey, model) {
      this.provider = provider;
      this.apiKey = apiKey;
      this.model = model;
    }
    
    async analyzeMessage(message, availableTags) {
      // –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∞–Ω–∞–ª–∏–∑–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
    }
    
    async generatePrompt(message, tags) {
      // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–æ–º–ø—Ç–∞ –¥–ª—è –ò–ò
    }
  }
  ```
- [ ] **3.2** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É —Ä–∞–∑–Ω—ã—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤:
  - OpenAI GPT-3.5/4
  - Perplexity API
  - Anthropic Claude (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- [ ] **3.3** –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ –∏ retry –ª–æ–≥–∏–∫—É

### 4. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ —Å –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ —Ç–µ–≥–∞–º–∏ –¥–ª—è –ò–ò
- [ ] **4.1** –°–æ–∑–¥–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `prepareTagsContext()` –≤ `src/ai/context.js`:
  ```javascript
  async function prepareTagsContext(supabaseClient) {
    // –ü–æ–ª—É—á–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ç–µ–≥–æ–≤ –∏–∑ Supabase
    // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —É–¥–æ–±–Ω—ã–π –¥–ª—è –ò–ò —Ñ–æ—Ä–º–∞—Ç
    // –í–æ–∑–≤—Ä–∞—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞ —Ç–µ–≥–æ–≤
  }
  ```
- [ ] **4.2** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–≥–æ–≤ –¥–ª—è –ø—Ä–æ–º–ø—Ç–∞:
  - –ò–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (—Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–µ/–¥–æ—á–µ—Ä–Ω–∏–µ —Ç–µ–≥–∏)
  - –û–ø–∏—Å–∞–Ω–∏—è —Ç–µ–≥–æ–≤ –¥–ª—è –ª—É—á—à–µ–≥–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è –ò–ò
  - –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–∞–∂–¥–æ–≥–æ —Ç–µ–≥–∞

### 5. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–∏ –∞–Ω–∞–ª–∏–∑–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –ò–ò
- [ ] **5.1** –°–æ–∑–¥–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `analyzeMessageWithAI()` –≤ `src/ai/analyzer.js`:
  ```javascript
  async function analyzeMessageWithAI(message, userId, supabaseClient) {
    // 1. –ü–æ–ª—É—á–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ò–ò –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    // 2. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ —Å —Ç–µ–≥–∞–º–∏
    // 3. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–æ–º–ø—Ç–∞
    // 4. –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ –∫ –ò–ò
    // 5. –ü–∞—Ä—Å–∏–Ω–≥ –æ—Ç–≤–µ—Ç–∞
    // 6. –í–æ–∑–≤—Ä–∞—Ç –Ω–∞–π–¥–µ–Ω–Ω–æ–≥–æ —Ç–µ–≥–∞
  }
  ```
- [ ] **5.2** –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–º–ø—Ç-—à–∞–±–ª–æ–Ω –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞:
  ```
  –¢—ã —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–π –ø–æ–º–æ—â–Ω–∏–∫. –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –æ–ø—Ä–µ–¥–µ–ª–∏ –Ω–∞–∏–±–æ–ª–µ–µ –ø–æ–¥—Ö–æ–¥—è—â–∏–π —Ç–µ–≥ (–∫–∞—Ç–µ–≥–æ—Ä–∏—é —Ä–∞—Å—Ö–æ–¥–∞/–¥–æ—Ö–æ–¥–∞) –∏–∑ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞.

  –°–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: "{message}"
  
  –î–æ—Å—Ç—É–ø–Ω—ã–µ —Ç–µ–≥–∏:
  {tags_list}
  
  –í–µ—Ä–Ω–∏ —Ç–æ–ª—å–∫–æ –Ω–∞–∑–≤–∞–Ω–∏–µ –Ω–∞–∏–±–æ–ª–µ–µ –ø–æ–¥—Ö–æ–¥—è—â–µ–≥–æ —Ç–µ–≥–∞. –ï—Å–ª–∏ —Ç–µ–≥ –Ω–µ –Ω–∞–π–¥–µ–Ω, –≤–µ—Ä–Ω–∏ "–ù–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ".
  ```

### 6. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ò–ò-–∞–Ω–∞–ª–∏–∑–∞ –≤ –ø–æ—Ç–æ–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
- [ ] **6.1** –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `handleMessage()` –≤ `index.js`:
  ```javascript
  // –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
  const aiResponse = await analyzeMessageWithAI(text, user.id, supabaseClient);
  ```
- [ ] **6.2** –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –ò–ò-–æ—Ç–≤–µ—Ç–∞:
  - –ï—Å–ª–∏ —Ç–µ–≥ –Ω–∞–π–¥–µ–Ω - –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
  - –ï—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω - –æ—Å—Ç–∞–≤–∏—Ç—å —Ç–µ–∫—É—â–∏–π —Ç–µ–≥ "üõçÔ∏è –ü—Ä–æ–¥—É–∫—Ç—ã"
  - –û–±—Ä–∞–±–æ—Ç–∞—Ç—å –æ—à–∏–±–∫–∏ –ò–ò

### 7. –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞ –ò–ò –≤ –Ω–æ–≤–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏
- [ ] **7.1** –°–æ–∑–¥–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `sendAIResponse()`:
  ```javascript
  async function sendAIResponse(chatId, originalMessage, aiTag, confidence) {
    const aiMessage = `ü§ñ –ò–ò –æ–ø—Ä–µ–¥–µ–ª–∏–ª –∫–∞—Ç–µ–≥–æ—Ä–∏—é: ${aiTag}
    
üìä –£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å: ${confidence}%

üí° –ï—Å–ª–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—è –Ω–µ–≤–µ—Ä–Ω–∞, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫–∏ –Ω–∏–∂–µ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∏.`;
    
    // –û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–æ–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º –ò–ò
    // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –∫–Ω–æ–ø–∫–∞–º–∏
  }
  ```
- [ ] **7.2** –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É –ò–ò-–æ—Ç–≤–µ—Ç–∞ –≤ –æ—Å–Ω–æ–≤–Ω–æ–π –ø–æ—Ç–æ–∫:
  - –û—Ç–ø—Ä–∞–≤–∏—Ç—å –ò–ò-–æ—Ç–≤–µ—Ç –∫–∞–∫ –Ω–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
  - –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∫–Ω–æ–ø–∫–∞–º–∏
  - –î–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫–∏ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è/–æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è –ò–ò-—Ä–µ—à–µ–Ω–∏—è

### 8. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –ò–ò –∏ fallback —Å—Ü–µ–Ω–∞—Ä–∏–∏
- [ ] **8.1** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ –ò–ò:
  - –¢–∞–π–º–∞—É—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ (30 —Å–µ–∫—É–Ω–¥)
  - –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ª–∏–º–∏—Ç–æ–≤ API
  - –ù–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –ò–ò-—Å–µ—Ä–≤–∏—Å–∞
  - –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –æ—Ç–≤–µ—Ç –ò–ò
- [ ] **8.2** –°–æ–∑–¥–∞—Ç—å fallback —Å—Ü–µ–Ω–∞—Ä–∏–∏:
  - –ü—Ä–∏ –æ—à–∏–±–∫–µ –ò–ò - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π —Ç–µ–≥
  - –ü—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ - –ø–æ–∫–∞–∑–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
  - –ü—Ä–∏ –Ω–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–º –æ—Ç–≤–µ—Ç–µ - –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å –≤—ã–±–æ—Ä –∏–∑ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —Ç–µ–≥–æ–≤

### 9. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è –ò–ò-—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞
- [ ] **9.1** –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:
  - –ü—Ä–æ—Å—Ç—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è ("–∫—É–ø–∏–ª —Ö–ª–µ–±")
  - –°–ª–æ–∂–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è ("–æ–ø–ª–∞—Ç–∏–ª –∏–Ω—Ç–µ—Ä–Ω–µ—Ç –∑–∞ –º–µ—Å—è—Ü")
  - –ù–µ–æ–¥–Ω–æ–∑–Ω–∞—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è ("–ø–æ—Ç—Ä–∞—Ç–∏–ª –¥–µ–Ω—å–≥–∏")
  - –°–æ–æ–±—â–µ–Ω–∏—è —Å –æ—à–∏–±–∫–∞–º–∏
- [ ] **9.2** –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é:
  - –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ API –∫–ª—é—á–∞–º–∏
  - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –Ω–∞ Render.com
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤
```
src/
‚îú‚îÄ‚îÄ ai/
‚îÇ   ‚îú‚îÄ‚îÄ client.js          # –ö–ª–∏–µ–Ω—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ò–ò API
‚îÇ   ‚îú‚îÄ‚îÄ analyzer.js        # –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –∞–Ω–∞–ª–∏–∑–∞
‚îÇ   ‚îú‚îÄ‚îÄ context.js         # –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
‚îÇ   ‚îî‚îÄ‚îÄ prompts.js         # –®–∞–±–ª–æ–Ω—ã –ø—Ä–æ–º–ø—Ç–æ–≤
‚îú‚îÄ‚îÄ supabase/
‚îÇ   ‚îî‚îÄ‚îÄ client.js          # –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –∫–ª–∏–µ–Ω—Ç —Å –ò–ò –º–µ—Ç–æ–¥–∞–º–∏
‚îî‚îÄ‚îÄ zenmoney/
    ‚îî‚îÄ‚îÄ api.js             # –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π API –∫–ª–∏–µ–Ω—Ç
```

### –ù–æ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```env
# AI Services
OPENAI_API_KEY=sk-...
PERPLEXITY_API_KEY=pplx-...
AI_SERVICE_PROVIDER=openai
AI_MODEL=gpt-3.5-turbo
AI_MAX_TOKENS=150
AI_TEMPERATURE=0.7
```

### –ù–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞
- `/ai_settings` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ò–ò –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `/ai_test` - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ò–ò –Ω–∞ –ø—Ä–∏–º–µ—Ä–µ
- `/ai_disable` - –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –ò–ò-–∞–Ω–∞–ª–∏–∑–∞

### –ü–æ—Ç–æ–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ
2. –ë–æ—Ç —Å–æ–∑–¥–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ (–∫–∞–∫ —Å–µ–π—á–∞—Å)
3. **–ù–û–í–û–ï**: –ë–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–∞ –∞–Ω–∞–ª–∏–∑ –ò–ò
4. **–ù–û–í–û–ï**: –ò–ò –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø–æ–¥—Ö–æ–¥—è—â–∏–π —Ç–µ–≥
5. **–ù–û–í–û–ï**: –ë–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º –ò–ò
6. –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∫–Ω–æ–ø–∫–∞–º–∏ –æ—Å—Ç–∞–µ—Ç—Å—è
7. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∏–ª–∏ —Å–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

1. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –ò–ò-–∞–Ω–∞–ª–∏–∑ –Ω–µ –¥–æ–ª–∂–µ–Ω –∑–∞–º–µ–¥–ª—è—Ç—å –æ—Ç–≤–µ—Ç –±–æ—Ç–∞
2. **–°—Ç–æ–∏–º–æ—Å—Ç—å**: –ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å —Ä–∞—Å—Ö–æ–¥—ã –Ω–∞ –ò–ò API
3. **–¢–æ—á–Ω–æ—Å—Ç—å**: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–æ–º–ø—Ç—ã –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Ç–æ—á–Ω–æ—Å—Ç–∏
4. **Fallback**: –í—Å–µ–≥–¥–∞ –∏–º–µ—Ç—å –ø–ª–∞–Ω –ë –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö –ò–ò
5. **–ü—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å**: –ù–µ –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ –ò–ò

## üÜò –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å API –∫–ª—é—á–∏ –ò–ò-—Å–µ—Ä–≤–∏—Å–æ–≤
2. –£–±–µ–¥–∏—Ç—å—Å—è –≤ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Ç–µ–≥–æ–≤ –≤ Supabase
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –æ—à–∏–±–æ–∫ –≤ Render.com
4. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ò–ò-–∑–∞–ø—Ä–æ—Å—ã –≤—Ä—É—á–Ω—É—é
5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–∏–º–∏—Ç—ã –∏ –∫–≤–æ—Ç—ã API

---

**–°—Ç–∞—Ç—É—Å**: –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: –í—ã—Å–æ–∫–∏–π  
**–û—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–æ—á–Ω–æ–µ –≤—Ä–µ–º—è**: 2-3 –¥–Ω—è  
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: $(date)
